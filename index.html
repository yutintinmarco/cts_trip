<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />

<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>åŒ—æµ·é“è¡Œç¨‹</title>
<style>
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui, sans-serif;
  background: #f5f5f7;
  color: #111111;
}
.container {
  max-width: 480px;
  margin: 0 auto;
  padding: 16px 16px 40px 16px;
}
.header {
  margin-bottom: 16px;
}
.header-title-small {
  font-size: 13px;
  color: #777777;
  margin-bottom: 4px;
}
.header-title-main {
  font-size: 20px;
  font-weight: 600;
  margin-bottom: 4px;
}
.header-sub {
  font-size: 12px;
  color: #555555;
  line-height: 1.5;
}
.card {
  background: #ffffff;
  border-radius: 16px;
  padding: 12px 14px;
  box-shadow: 0 8px 20px rgba(15, 23, 42, 0.08);
  margin-bottom: 14px;
  border: 1px solid #e5e5ea;
}
.trip-row {
  display: flex;
  justify-content: space-between;
  font-size: 12px;
  color: #333333;
}
.trip-col-title {
  font-size: 11px;
  color: #999999;
  margin-bottom: 2px;
}
.trip-col-main {
  font-size: 13px;
}
.trip-col-sub {
  font-size: 11px;
  color: #777777;
  margin-top: 2px;
}

/* Weather */
.weather-header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  margin-bottom: 6px;
}
.weather-title {
  font-size: 13px;
  font-weight: 600;
}
.weather-updated {
  font-size: 10px;
  color: #999999;
}
.weather-today {
  font-size: 12px;
  margin-bottom: 4px;
  color: #333333;
}
.weather-sun {
  font-size: 11px;
  margin-bottom: 6px;
  color: #777777;
}
.weather-days {
  display: flex;
  overflow-x: auto;
  gap: 8px;
}
.weather-day {
  min-width: 70px;
  padding: 6px 8px;
  border-radius: 10px;
  border: 1px solid #e5e5ea;
  background: #fafafa;
  font-size: 11px;
  text-align: center;
}
.weather-day-label {
  font-weight: 600;
  margin-bottom: 2px;
}
.weather-temp {
  margin-top: 2px;
}

/* Tabs */
.day-tabs {
  display: flex;
  gap: 8px;
  margin: 16px 0 10px 0;
}
.day-tab {
  flex: 1;
  padding: 7px 0;
  text-align: center;
  font-size: 13px;
  border-radius: 999px;
  border: 1px solid #dadada;
  background: #ffffff;
  color: #555555;
}
.day-tab.active {
  background: #f5c542;
  border-color: #f5c542;
  color: #111111;
  font-weight: 600;
}
.day-content {
  display: none;
}
.day-content.active {
  display: block;
}

/* Timeline */
.section-title {
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 4px;
  color: #333333;
}
.section-sub {
  font-size: 11px;
  color: #777777;
  margin-bottom: 8px;
}
.timeline-item {
  display: flex;
  gap: 10px;
  padding: 10px 8px;
  border-radius: 12px;
  background: #ffffff;
  margin-bottom: 6px;
  border: 1px solid #e5e5ea;
}
.timeline-item.clickable {
  cursor: pointer;
}
.time {
  width: 70px;
  font-size: 13px;
  color: #666666;
  font-variant-numeric: tabular-nums;
}
.icon {
  width: 22px;
  font-size: 20px;
  line-height: 22px;
}
.content {
  flex: 1;
}
.content-title {
  font-size: 14px;
  margin-bottom: 2px;
}
.content-note {
  font-size: 11px;
  color: #777777;
}

/* Footer */
.footer-note {
  margin-top: 18px;
  font-size: 10px;
  color: #999999;
  text-align: center;
}

/* Modal */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.35);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 999;
}
.modal-backdrop.active {
  display: flex;
}
.modal {
  width: 90%;
  max-width: 420px;
  background: #ffffff;
  border-radius: 18px;
  padding: 14px 16px 12px 16px;
  box-shadow: 0 18px 40px rgba(15,23,42,0.3);
}
.modal-img-wrapper {
  margin: -2px 0 8px 0;
}
.modal-img-wrapper img {
  width: 100%;
  border-radius: 14px;
  display: block;
}
.modal-dots {
  display: flex;
  justify-content: center;
  gap: 6px;
  margin: 4px 0 4px 0;
}
.modal-dot {
  width: 6px;
  height: 6px;
  border-radius: 999px;
  background: #d0d0d0;
}
.modal-dot.active {
  background: #111111;
}
.modal-title {
  font-size: 15px;
  font-weight: 600;
  margin-bottom: 6px;
}
.modal-time {
  font-size: 12px;
  color: #777777;
  margin-bottom: 8px;
}
.modal-body {
  font-size: 13px;
  color: #444444;
  line-height: 1.5;
  margin-bottom: 10px;
}
.modal-actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}
.modal-link-btn {
  flex: 1;
  text-align: center;
  padding: 7px 0;
  border-radius: 999px;
  border: none;
  background: #0b74de;
  color: #ffffff;
  font-size: 12px;
}
.modal-close-btn {
  padding: 6px 14px;
  border-radius: 999px;
  border: 1px solid #dddddd;
  background: #f5f5f7;
  font-size: 12px;
}
</style>
</head>
<body>
<div class="container">

<!-- Header -->
<div class="header">
  <div class="header-title-small">My Trip</div>
  <div class="header-title-main">åŒ—æµ·é“ æœ­å¹Œ å…­æ—¥è¡Œç¨‹</div>
  <div class="header-sub">
    æ—…ç¨‹æ—¥æœŸ  12æœˆ24æ—¥ è‡³ 12æœˆ29æ—¥<br/>
    å»ç¨‹ CX580  é¦™æ¸¯ è‡³ æœ­å¹Œ  09:10 è‡³ 14:50<br/>
    å›ç¨‹ CX587  æœ­å¹Œ è‡³ é¦™æ¸¯ 19:00 è‡³ 23:55
  </div>
</div>

<!-- Flight Summary -->
<div class="card">
  <div class="trip-row">
    <div>
      <div class="trip-col-title">å»ç¨‹</div>
      <div class="trip-col-main">12æœˆ24æ—¥  CX580</div>
      <div class="trip-col-sub">é¦™æ¸¯ â†’ æœ­å¹Œ  09:10 è‡³ 14:50</div>
    </div>
    <div>
      <div class="trip-col-title">å›ç¨‹</div>
      <div class="trip-col-main">12æœˆ29æ—¥  CX587</div>
      <div class="trip-col-sub">æœ­å¹Œ â†’ é¦™æ¸¯ 19:00 è‡³ 23:55</div>
    </div>
  </div>
</div>

<!-- Weather Block -->
<div class="card">
  <div class="weather-header">
    <div class="weather-title">æœ­å¹Œå¤©æ°£ï¼ˆè‡ªå‹•æ›´æ–°ï¼‰</div>
    <div class="weather-updated" id="weather-updated">è¼‰å…¥ä¸­â€¦</div>
  </div>
  <div class="weather-today" id="weather-today">æ­£åœ¨å–å¾—ä»Šæ—¥å¤©æ°£â€¦</div>
  <div class="weather-sun" id="weather-sun">æ­£åœ¨å–å¾—æ—¥å‡ºæ—¥è½æ™‚é–“â€¦</div>
  <div class="weather-days" id="weather-days"></div>
</div>

<!-- Tabs -->
<div class="day-tabs">
  <button class="day-tab active" data-day="1">Day 1</button>
  <button class="day-tab" data-day="2">Day 2</button>
  <button class="day-tab" data-day="3">Day 3</button>
  <button class="day-tab" data-day="4">Day 4</button>
  <button class="day-tab" data-day="5">Day 5</button>
  <button class="day-tab" data-day="6">Day 6</button>
</div>

<!-- Day 1 -->
<div class="day-content active" data-day="1">
  <div class="section-title">12æœˆ24æ—¥  æŠµé”æœ­å¹Œ</div>
  <div class="section-sub">å…¥ä½ HOTEL MYSTAYS Sapporo Station</div>

  <div class="timeline-item">
    <div class="time">09:10</div>
    <div class="icon">âœˆï¸</div>
    <div class="content">
      <div class="content-title">é¦™æ¸¯å‡ºç™¼</div>
      <div class="content-note">CX580 å‰å¾€æœ­å¹Œ</div>
    </div>
  </div>

  <div class="timeline-item">
    <div class="time">14:50</div>
    <div class="icon">ğŸ›¬</div>
    <div class="content">
      <div class="content-title">æŠµé”æ–°åƒæ­²æ©Ÿå ´</div>
      <div class="content-note">è¾¦ç†å…¥å¢ƒ  å–è¡Œæ</div>
    </div>
  </div>

  <div class="timeline-item">
    <div class="time">16:00</div>
    <div class="icon">ğŸš†</div>
    <div class="content">
      <div class="content-title">å‰å¾€æœ­å¹Œå¸‚å€</div>
      <div class="content-note">æ­ä¹˜ JR æˆ–å·´å£«å‰å¾€é…’åº—</div>
    </div>
  </div>

  <!-- Clickable hotel with gallery -->
  <div class="timeline-item clickable"
       data-type="hotel-mystays"
       data-title="HOTEL MYSTAYS Sapporo Station"
       data-time="å…¥ä½æ™‚é–“ ç´„ 17:00"
       data-detail="é„°è¿‘æœ­å¹Œç«™  æ–¹ä¾¿æ‹–è¡ŒæåŠä½œç‚ºæœ­å¹Œå¸‚å€è¡Œç¨‹æ“šé»  å»ºè­°å…ˆç†Ÿæ‚‰é™„è¿‘ä¾¿åˆ©åº—åŠé¤å»³ä½ç½®  ä¹‹å¾Œå¹¾æ™šæ´»å‹•éƒ½æœƒç”±æ­¤å‡ºç™¼ã€‚"
       data-maps="https://maps.app.goo.gl/hdXS1RAAQHqWqWtS6">
    <div class="time">17:00</div>
    <div class="icon">ğŸ¨</div>
    <div class="content">
      <div class="content-title">å…¥ä½ HOTEL MYSTAYS Sapporo Station</div>
      <div class="content-note">é»æ“ŠæŸ¥çœ‹é…’åº—ç›¸ç‰‡  è©³ç´°è³‡è¨Š  åŠæ‰“é–‹åœ°åœ–</div>
    </div>
  </div>

  <!-- Clickable Christmas market -->
  <div class="timeline-item clickable"
       data-type="market"
       data-title="æœ­å¹Œæ…•å°¼é»‘è–èª•å¸‚å ´"
       data-time="18:00 è‡³ 21:00"
       data-detail="ä½æ–¼å¤§é€šå…¬åœ’é™„è¿‘  è–èª•æœŸé–“é™å®šå¸‚é›†  æœ‰å°æœ¨å±‹æ”¤æª”  ç†±ç´…é…’  é¦™è…¸  ç”œå“åŠæ‰‹ä½œç´€å¿µå“  å¤œæ™šæœ‰ç‡ˆé£¾åŒæ°£æ°›  å»ºè­°ææ—©å°‘å°‘å»  å¯ä»¥å½±å¤œæ™¯åŒæ…¢æ…¢è¡Œå¹¾åœˆ  æ³¨æ„é˜²å¯’åŠäººæµ  ç•™æ„è¿”è¿”ç¨‹äº¤é€šæ™‚é–“ã€‚"
       data-maps="">
    <div class="time">18:00â€“21:00</div>
    <div class="icon">ğŸ„</div>
    <div class="content">
      <div class="content-title">æœ­å¹Œæ…•å°¼é»‘è–èª•å¸‚å ´</div>
      <div class="content-note">è–èª•ç‡ˆé£¾  å°æœ¨å±‹æ”¤æª”  ç†±ç´…é…’åŠå°é£Ÿ</div>
    </div>
  </div>
</div>

<!-- Day 2 -->
<div class="day-content" data-day="2">
  <div class="section-title">12æœˆ25æ—¥ è¡Œç¨‹</div>
</div>

<!-- Day 3 -->
<div class="day-content" data-day="3">
  <div class="section-title">12æœˆ26æ—¥ è¡Œç¨‹</div>
</div>

<!-- Day 4 -->
<div class="day-content" data-day="4">
  <div class="section-title">12æœˆ27æ—¥ è¡Œç¨‹</div>
</div>

<!-- Day 5 -->
<div class="day-content" data-day="5">
  <div class="section-title">12æœˆ28æ—¥ è¡Œç¨‹</div>
  <div class="section-sub">é…’åº—è½‰å¾€ JR Inn Sapporo</div>
</div>

<!-- Day 6 -->
<div class="day-content" data-day="6">
  <div class="section-title">12æœˆ29æ—¥ å›ç¨‹</div>

  <div class="timeline-item">
    <div class="time">19:00</div>
    <div class="icon">âœˆï¸</div>
    <div class="content">
      <div class="content-title">CX587 æœ­å¹Œå‡ºç™¼</div>
      <div class="content-note">æº–å‚™ç™»æ©Ÿ  å»ºè­°ææ—©åˆ°é”æ©Ÿå ´</div>
    </div>
  </div>

  <div class="timeline-item">
    <div class="time">23:55</div>
    <div class="icon">ğŸ›¬</div>
    <div class="content">
      <div class="content-title">æŠµé”é¦™æ¸¯</div>
      <div class="content-note">çµæŸå…­æ—¥è¡Œç¨‹</div>
    </div>
  </div>
</div>

<div class="footer-note">
  è¡Œç¨‹  å¤©æ°£  æ—¥å‡ºæ—¥è½  ç…§ç‰‡åŠåœ°åœ–ç”± AI å”åŠ©æ•´åˆ  é»æ“Šé…’åº—å¯æŸ¥çœ‹ç›¸ç‰‡åŠåœ¨åœ°åœ–é–‹å•Ÿ
</div>
</div>

<!-- Modal -->
<div class="modal-backdrop" id="detail-backdrop">
  <div class="modal">
    <div class="modal-img-wrapper" id="detail-img-wrapper" style="display:none;">
      <img id="detail-img" src="" alt="photo" />
      <div class="modal-dots" id="detail-dots" style="display:none;"></div>
    </div>
    <div class="modal-title" id="detail-title">æ¨™é¡Œ</div>
    <div class="modal-time" id="detail-time">æ™‚é–“</div>
    <div class="modal-body" id="detail-body">è©³ç´°å…§å®¹</div>
    <div class="modal-actions">
      <button class="modal-link-btn" id="detail-maps-btn">åœ¨ Google Maps é–‹å•Ÿ</button>
      <button class="modal-close-btn" id="detail-close">é—œé–‰</button>
    </div>
  </div>
</div>

<script>
// Tabs
const tabs = document.querySelectorAll(".day-tab");
const days = document.querySelectorAll(".day-content");

tabs.forEach(tab => {
  tab.addEventListener("click", () => {
    tabs.forEach(t => t.classList.remove("active"));
    days.forEach(d => d.classList.remove("active"));
    tab.classList.add("active");
    document
      .querySelector('.day-content[data-day="' + tab.dataset.day + '"]')
      .classList.add("active");
    window.scrollTo({ top: 0, behavior: "smooth" });
  });
});

// Weather + Sunrise/Sunset
const weatherTodayEl = document.getElementById("weather-today");
const weatherSunEl = document.getElementById("weather-sun");
const weatherDaysEl = document.getElementById("weather-days");
const weatherUpdatedEl = document.getElementById("weather-updated");

const latitude = 43.06;
const longitude = 141.35;

const url =
  "https://api.open-meteo.com/v1/forecast?latitude=" +
  latitude +
  "&longitude=" +
  longitude +
  "&timezone=Asia%2FTokyo&daily=temperature_2m_max,temperature_2m_min,sunrise,sunset";

fetch(url)
  .then(r => r.json())
  .then(data => {
    if (!data.daily) {
      weatherTodayEl.textContent = "æš«æ™‚ç„¡æ³•å–å¾—å¤©æ°£è³‡æ–™";
      weatherSunEl.textContent = "";
      weatherUpdatedEl.textContent = "";
      return;
    }

    const dates = data.daily.time;
    const maxTemps = data.daily.temperature_2m_max;
    const minTemps = data.daily.temperature_2m_min;
    const sunrise = data.daily.sunrise;
    const sunset = data.daily.sunset;

    const todayMax = Math.round(maxTemps[0]);
    const todayMin = Math.round(minTemps[0]);
    const todayDate = dates[0].split("-").slice(1).join("/");
    weatherTodayEl.textContent =
      "ä»Šæ—¥ï¼ˆ" + todayDate + "ï¼‰  é«˜ " + todayMax + "Â°C  ä½ " + todayMin + "Â°C";

    const srTime = new Date(sunrise[0]).toTimeString().slice(0, 5);
    const ssTime = new Date(sunset[0]).toTimeString().slice(0, 5);
    weatherSunEl.textContent = "æ—¥å‡º " + srTime + "  æ—¥è½ " + ssTime;

    const now = new Date();
    weatherUpdatedEl.textContent =
      "æ›´æ–°æ™‚é–“ " +
      now.getHours().toString().padStart(2, "0") +
      ":" +
      now.getMinutes().toString().padStart(2, "0");

    const tripDates = ["12/24", "12/25", "12/26", "12/27", "12/28", "12/29"];
    weatherDaysEl.innerHTML = "";

    dates.forEach((d, i) => {
      const label = d.split("-").slice(1).join("/");
      if (!tripDates.includes(label)) return;

      const card = document.createElement("div");
      card.className = "weather-day";

      const lbl = document.createElement("div");
      lbl.className = "weather-day-label";
      lbl.textContent = label;

      const temp = document.createElement("div");
      temp.className = "weather-temp";
      temp.textContent =
        "é«˜ " +
        Math.round(maxTemps[i]) +
        "Â°  ä½ " +
        Math.round(minTemps[i]) +
        "Â°";

      card.appendChild(lbl);
      card.appendChild(temp);
      weatherDaysEl.appendChild(card);
    });

    if (!weatherDaysEl.hasChildNodes()) {
      const info = document.createElement("div");
      info.style.fontSize = "11px";
      info.style.color = "#777777";
      info.textContent = "é å ±æš«æœªè¦†è“‹æ—…ç¨‹æ—¥æœŸ  é–‹è¡Œç¨‹å‰å¹¾æ—¥å†æŸ¥çœ‹ã€‚";
      weatherDaysEl.appendChild(info);
    }
  })
  .catch(() => {
    weatherTodayEl.textContent = "æš«æ™‚ç„¡æ³•é€£ç·šåˆ°å¤©æ°£æœå‹™";
    weatherSunEl.textContent = "";
    weatherUpdatedEl.textContent = "";
  });

// Modal with gallery + Google Maps
const detailBackdrop = document.getElementById("detail-backdrop");
const detailTitle = document.getElementById("detail-title");
const detailTime = document.getElementById("detail-time");
const detailBody = document.getElementById("detail-body");
const detailClose = document.getElementById("detail-close");
const detailMapsBtn = document.getElementById("detail-maps-btn");
const detailImgWrapper = document.getElementById("detail-img-wrapper");
const detailImg = document.getElementById("detail-img");
const detailDots = document.getElementById("detail-dots");

// gallery images for the hotel
const HOTEL_GALLERY = ['mystays_1.jpg','mystays_2.jpg','mystays_3.jpg'];

let currentMapsUrl = "";
let currentGallery = [];
let currentGalleryIndex = 0;

function renderDots() {
  detailDots.innerHTML = "";
  currentGallery.forEach((_, idx) => {
    const dot = document.createElement("div");
    dot.className = "modal-dot" + (idx === currentGalleryIndex ? " active" : "");
    dot.addEventListener("click", () => {
      currentGalleryIndex = idx;
      updateGalleryImage();
    });
    detailDots.appendChild(dot);
  });
}

function updateGalleryImage() {
  if (!currentGallery.length) return;
  detailImg.src = currentGallery[currentGalleryIndex];
  renderDots();
}

document.querySelectorAll(".timeline-item.clickable").forEach(item => {
  item.addEventListener("click", () => {
    const title = item.getAttribute("data-title") || "";
    const time = item.getAttribute("data-time") || "";
    const detail = item.getAttribute("data-detail") || "";
    const maps = item.getAttribute("data-maps") || "";
    const type = item.getAttribute("data-type") || "";

    detailTitle.textContent = title;
    detailTime.textContent = time;
    detailBody.textContent = detail;
    currentMapsUrl = maps;
    detailBackdrop.classList.add("active");

    if (type === "hotel-mystays") {
      currentGallery = HOTEL_GALLERY.slice();
      currentGalleryIndex = 0;
      detailImgWrapper.style.display = "block";
      detailDots.style.display = "flex";
      updateGalleryImage();
    } else {
      currentGallery = [];
      detailImgWrapper.style.display = "none";
      detailDots.style.display = "none";
      detailImg.src = "";
    }

    if (!maps) {
      detailMapsBtn.style.display = "none";
    } else {
      detailMapsBtn.style.display = "inline-block";
    }
  });
});

// tap image to go next
detailImg.addEventListener("click", () => {
  if (!currentGallery.length) return;
  currentGalleryIndex = (currentGalleryIndex + 1) % currentGallery.length;
  updateGalleryImage();
});

detailClose.addEventListener("click", () => {
  detailBackdrop.classList.remove("active");
});

detailBackdrop.addEventListener("click", e => {
  if (e.target === detailBackdrop) {
    detailBackdrop.classList.remove("active");
  }
});

detailMapsBtn.addEventListener("click", () => {
  if (currentMapsUrl) {
    window.open(currentMapsUrl, "_blank");
  }
});
</script>
</body>
</html>
